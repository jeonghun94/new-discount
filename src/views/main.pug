extends base
block content 
    body                        
        header 
            nav 
                //- img(src="/client/img/logo.gif", alt="이미지를 찾을 수 없습니다...", style="width:110px;")
                div(onclick="location.href='main.jsp'") CMCNI
                div.dropdown
                    i.fas.fa-bars
                    .dropdown-content 
                        div(onclick="location.href='http://localhost:8090/myPage.jsp'")
                            i.fas.fa-user  &nbsp 마이페이지
                        div(onclick="location.href='http://localhost:8090/update.jsp'")
                            i.fas.fa-lock &nbsp 암호변경
                        div(onclick="location.href='http://localhost:8090/history.jsp'")
                            i.fas.fa-chart-bar &nbsp 할인내역
                        div(onclick="location.href='http://localhost:8090/logout.jsp'")
                            i.fas.fa-sign-out-alt &nbsp 로그아웃
        section.main__form                            
            article 
                    h6 차량번호
                    input(type="text" maxlength="4" name="차량번호" placeholder="ex) 차량번호 4자리" id="inCarNo" oninput="checkVal(this)" )
                    button(type="button" id="searchBtn") 검색
        script.
            const inCarNo = document.querySelector('#inCarNo');
            const searchBtn = document.querySelector('#searchBtn');
            searchBtn.addEventListener('click',function(){
                if(inCarNo.value.length === 4) {
                    fetch(`/main2`, {
                        method:"POST",
                        headers : {"Content-Type" : "application/json"},
                        body:  JSON.stringify({
                            inCarNo : inCarNo.value,
                        }),
                    })
                    .then(response=>response.json())
                    .then(data=>console.log(data))
                    .catch(error=>console.log(error));
                }else {
                    alert('차량번호는 4자리이어야 합니다.')
                }
            });

            function checkVal(obj){
                obj.value = obj.value.replace(/[^0-9]/g, '');
            }
        include ./partials/footer